(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b54a386"],{"3feb":function(t,e,a){"use strict";a("9b16")},"4fc4":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("div",{staticClass:"main-content"},[t._t("default")],2)])},i=[],n={name:"PageBody"},r=n,o=(a("c95a"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"7617c039",null);e["a"]=c.exports},"6e70":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-container"},[e("div",{staticClass:"app-name"},[e("router-link",{attrs:{to:"/"}},[t._v("Campus Exchange")])],1),e("div",{staticClass:"search-container"},[e("el-input",{attrs:{placeholder:"Search item..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchIdle.apply(null,arguments)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchIdle},slot:"append"})],1)],1),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.toRelease}},[t._v("Create new listing")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-chat-dot-round"},on:{click:t.toMessage}},[t._v("Message")]),t.isLogin?e("el-dropdown",{attrs:{trigger:"click"}},[e("div",{staticStyle:{cursor:"pointer",display:"flex","align-items":"center"}},[e("div",{staticStyle:{"font-size":"16px",color:"#409EFF","padding-right":"5px"}},[t._v(t._s(t.nicknameValue?t.nicknameValue:t.nickname))]),e("el-avatar",{attrs:{src:t.avatarValue?t.avatarValue:t.avatar}})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("div",{on:{click:t.toMe}},[t._v("Profile")])]),e("el-dropdown-item",{staticStyle:{color:"red"},attrs:{divided:""}},[e("div",{on:{click:t.loginOut}},[t._v("Logout")])])],1)],1):e("router-link",{staticClass:"user-name-text",attrs:{to:"/login"}},[t._v("Login")])],1)])},i=[],n=(a("a481"),{name:"Header",props:["searchInput","nicknameValue","avatarValue"],data:function(){return{searchValue:this.searchInput,nickname:"Login",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",isLogin:!1}},created:function(){var t=this;this.$globalData.userInfo.nickname?(this.nickname=this.$globalData.userInfo.nickname,this.avatar=this.$globalData.userInfo.avatar,this.isLogin=!0):this.$api.getUserInfo().then((function(e){console.log("Header getUserInfo:",e),1===e.status_code&&(t.nickname=e.data.nickname,t.avatar=e.data.avatar,e.data.signInTime=e.data.signInTime.substring(0,10),t.$globalData.userInfo=e.data,t.isLogin=!0)}))},methods:{searchIdle:function(){"/search"!==this.$route.path?this.$router.push({path:"/search",query:{searchValue:this.searchValue}}):(this.$router.replace({path:"/search",query:{searchValue:this.searchValue}}),this.$router.go(0))},toMe:function(){"/me"!==this.$route.path&&this.$router.push({path:"/me"})},toMessage:function(){"/message"!==this.$route.path&&this.$router.push({path:"/message"})},toRelease:function(){"/release"!==this.$route.path&&this.$router.push({path:"/release"})},loginOut:function(){var t=this;this.$api.logout().then((function(e){1===e.status_code?(t.$globalData.userInfo={},console.log("login out"),"/index"===t.$route.path?t.$router.go(0):t.$router.push({path:"/index"})):t.$message.error("Network or system error, fail to logout.")}))}}}),r=n,o=(a("3feb"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"3e476e82",null);e["a"]=c.exports},"71c17":function(t,e,a){},"81c2":function(t,e,a){},"85a9":function(t,e,a){"use strict";var s=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"foot-container"},[e("div",{staticClass:"author"},[t._v("Campus Exchange")])])}],n={name:"Foot"},r=n,o=(a("e97d"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"c9fd9caa",null);e["a"]=c.exports},"91f0":function(t,e,a){"use strict";a("81c2")},"9b16":function(t,e,a){},c95a:function(t,e,a){"use strict";a("ff1e")},e4b4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("app-head"),e("app-body",[e("div",{staticClass:"message-container"},[e("div",{staticClass:"message-container-title"},[t._v("My Messages")]),t._l(t.meslist,(function(a,s){return e("div",{staticClass:"message-container-list",on:{click:function(e){return t.toDetails(a.idle.id)}}},[e("div",{staticClass:"message-container-list-left"},[e("el-image",{staticStyle:{width:"55px",height:"55px","border-radius":"5px"},attrs:{src:a.fromU.avatar,fit:"cover"}}),e("div",{staticClass:"message-container-list-text"},[e("div",{staticClass:"message-nickname"},[t._v(t._s(a.fromU.nickname))]),e("div",{staticClass:"message-content"},[t._v(t._s(a.content))]),e("div",{staticClass:"message-time"},[t._v(t._s(a.createTime))])])],1),e("div",{staticClass:"message-container-list-right"},[e("el-image",{staticStyle:{width:"130px",height:"90px"},attrs:{src:a.idle.imgUrl,fit:"contain"}})],1)])}))],2),e("app-foot")],1)],1)},i=[],n=(a("28a5"),a("6e70")),r=a("4fc4"),o=a("85a9"),c={name:"message",components:{AppHead:n["a"],AppBody:r["a"],AppFoot:o["a"]},data:function(){return{meslist:[]}},created:function(){var t=this;this.$api.getAllMyMessage().then((function(e){if(console.log(e),1===e.status_code){for(var a=0;a<e.data.length;a++){var s=JSON.parse(e.data[a].idle.pictureList);e.data[a].idle.imgUrl=s?s[0]:"";for(var i=e.data[a].content.split("<br>"),n=i[0],r=1;r<i.length;r++)n+="  "+i[r];e.data[a].content=n}t.meslist=e.data}}))},methods:{toDetails:function(t){this.$router.push({path:"/details",query:{id:t}})}}},l=c,u=(a("91f0"),a("2877")),d=Object(u["a"])(l,s,i,!1,null,"c375f6f6",null);e["default"]=d.exports},e97d:function(t,e,a){"use strict";a("71c17")},ff1e:function(t,e,a){}}]);