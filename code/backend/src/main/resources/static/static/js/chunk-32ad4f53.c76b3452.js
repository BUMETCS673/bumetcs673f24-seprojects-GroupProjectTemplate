(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32ad4f53"],{"02e0":function(e,t,a){},"3d34":function(e,t,a){"use strict";a("ac38")},"3feb":function(e,t,a){"use strict";a("9b16")},"4fc4":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[t("div",{staticClass:"main-content"},[e._t("default")],2)])},i=[],n={name:"PageBody"},r=n,d=(a("c95a"),a("2877")),o=Object(d["a"])(r,s,i,!1,null,"7617c039",null);t["a"]=o.exports},"550c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("app-head",{attrs:{"nickname-value":e.userInfo.nickname,avatarValue:e.userInfo.avatar}}),t("app-body",[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.eidtAddress,expression:"!eidtAddress"}]},[t("div",{staticClass:"user-info-container"},[t("div",{staticClass:"user-info-details"},[t("el-upload",{attrs:{action:"http://localhost:8080/file/","on-success":e.fileHandleSuccess,"file-list":e.imgFileList,accept:"image/*"}},[t("el-image",{staticStyle:{width:"120px",height:"120px","border-radius":"10px"},attrs:{src:e.userInfo.avatar,fit:"contain"}})],1),t("div",{staticClass:"user-info-details-text"},[t("div",{staticClass:"user-info-details-text-nickname"},[e._v(e._s(e.userInfo.nickname))]),t("div",{staticClass:"user-info-details-text-time"},[e._v(e._s(e.userInfo.signInTime)+" joined platform")]),t("div",{staticClass:"user-info-details-text-edit"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.userInfoDialogVisible=!0}}},[e._v("Edit Personal Information")])],1),t("el-dialog",{attrs:{title:"Edit Personal Information",visible:e.userInfoDialogVisible,width:"400px"},on:{close:e.finishEdit,"update:visible":function(t){e.userInfoDialogVisible=t}}},[t("div",{staticClass:"edit-tip"},[e._v("Nickname")]),t("el-input",{attrs:{disabled:e.notUserNicknameEdit},on:{change:e.saveUserNickname},model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}},[t("el-button",{attrs:{slot:"append",type:"warning",icon:"el-icon-edit"},on:{click:function(t){e.notUserNicknameEdit=!1}},slot:"append"},[e._v("Edit\n                                ")])],1),e.userPasswordEdit?t("div",[t("div",{staticClass:"edit-tip"},[e._v("Old Password")]),t("el-input",{attrs:{"show-password":""},model:{value:e.userPassword1,callback:function(t){e.userPassword1=t},expression:"userPassword1"}}),t("div",{staticClass:"edit-tip"},[e._v("New Password")]),t("el-input",{attrs:{"show-password":""},model:{value:e.userPassword2,callback:function(t){e.userPassword2=t},expression:"userPassword2"}}),t("div",{staticClass:"edit-tip"},[e._v("Confirm New Password")]),t("el-input",{attrs:{"show-password":""},model:{value:e.userPassword3,callback:function(t){e.userPassword3=t},expression:"userPassword3"}}),t("div",{staticClass:"edit-tip"}),t("el-button",{attrs:{plain:""},on:{click:e.savePassword}},[e._v("Confirm Modification")])],1):t("div",[t("div",{staticClass:"edit-tip"},[e._v("Password")]),t("el-input",{attrs:{value:"123456",disabled:!0,"show-password":""}},[t("el-button",{attrs:{slot:"append",type:"warning",icon:"el-icon-edit"},on:{click:function(t){e.userPasswordEdit=!0}},slot:"append"},[e._v("Edit\n                                    ")])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.userInfoDialogVisible=!1}}},[e._v("Done")])],1)],1)],1)],1),t("div",{staticClass:"user-info-splace"},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.eidtAddress=!0}}},[e._v("Edit Delivery Address")])],1)]),t("div",{staticClass:"idle-container"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"Recently Published",name:"1"}}),t("el-tab-pane",{attrs:{label:"Unlisted",name:"2"}}),t("el-tab-pane",{attrs:{label:"My Shopping Cart",name:"3"}}),t("el-tab-pane",{attrs:{label:"Sales Record",name:"4"}}),t("el-tab-pane",{attrs:{label:"Purchase Record",name:"5"}})],1),t("div",{staticClass:"idle-container-list"},e._l(e.dataList[e.activeName-1],(function(a,s){return t("div",{staticClass:"idle-container-list-item"},[t("div",{staticClass:"idle-container-list-item-detail",on:{click:function(t){return e.toDetails(e.activeName,a)}}},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:a.imgUrl,fit:"cover"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"},[e._v("No Image")])])]),t("div",{staticClass:"idle-container-list-item-text"},[t("div",{staticClass:"idle-container-list-title"},[e._v("\n                                    "+e._s(a.idleName)+"\n                                ")]),t("div",{staticClass:"idle-container-list-idle-details",domProps:{innerHTML:e._s(a.idleDetails)}},[e._v("\n                                    "+e._s(a.idleDetails)+"\n                                ")]),t("div",{staticClass:"idle-container-list-idle-time"},[e._v(e._s(a.timeStr))]),t("div",{staticClass:"idle-item-foot"},[t("div",{staticClass:"idle-price"},[e._v("\n                                        $"+e._s(a.idlePrice)+"\n                                        "+e._s("4"===e.activeName||"5"===e.activeName?e.orderStatus[a.orderStatus]:"")+"\n                                    ")]),"4"!==e.activeName&&"5"!==e.activeName?t("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",plain:""},on:{click:function(t){return t.stopPropagation(),e.handle(e.activeName,a,s)}},slot:"reference"},[e._v(e._s(e.handleName[e.activeName-1])+"\n                                    ")]):e._e()],1)])],1)])})),0)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.eidtAddress,expression:"eidtAddress"}],staticClass:"address-container"},[t("el-page-header",{staticClass:"address-container-back",attrs:{content:"Delivery Address"},on:{back:function(t){e.eidtAddress=!1}}}),t("div",{staticClass:"address-container-add"},[t("div",{staticClass:"address-container-add-title"},[e._v("Add New Delivery Address")]),t("div",{staticClass:"address-container-add-item"},[t("el-input",{attrs:{placeholder:"Please enter recipient name",maxlength:"10","show-word-limit":""},model:{value:e.addressInfo.consigneeName,callback:function(t){e.$set(e.addressInfo,"consigneeName",t)},expression:"addressInfo.consigneeName"}},[t("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Recipient Name")])])],1),t("div",{staticClass:"address-container-add-item"},[t("el-input",{attrs:{placeholder:"Please enter recipient's phone number",onkeyup:"this.value=this.value.replace(/[^\\d.]/g,'');",maxlength:"11","show-word-limit":""},model:{value:e.addressInfo.consigneePhone,callback:function(t){e.$set(e.addressInfo,"consigneePhone",t)},expression:"addressInfo.consigneePhone"}},[t("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Your Phone Number")])])],1),t("div",{staticClass:"address-container-add-item"},[t("span",{staticClass:"demonstration"},[e._v("Dorm Type/Building Number/Floor")]),t("el-cascader",{attrs:{options:e.options,separator:" "},on:{change:e.handleAddressChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),t("div",{staticClass:"address-container-add-item"},[t("el-input",{attrs:{placeholder:"Dorm Number + East/West/Central Location in Hallway",maxlength:"50","show-word-limit":""},model:{value:e.addressInfo.detailAddress,callback:function(t){e.$set(e.addressInfo,"detailAddress",t)},expression:"addressInfo.detailAddress"}},[t("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Detailed Address")])])],1),t("el-checkbox",{model:{value:e.addressInfo.defaultFlag,callback:function(t){e.$set(e.addressInfo,"defaultFlag",t)},expression:"addressInfo.defaultFlag"}},[e._v("Set as Default Address")]),t("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.saveAddress}},[e._v("Save")])],1),t("div",{staticClass:"address-container-list"},[t("div",{staticStyle:{color:"#409eff","font-size":"15px","padding-left":"10px"}},[e._v("Existing Delivery Addresses")]),t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.addressData}},[t("el-table-column",{attrs:{prop:"consigneeName",label:"Recipient Name",width:"100"}}),t("el-table-column",{attrs:{prop:"consigneePhone",label:"Phone Number",width:"120"}}),t("el-table-column",{attrs:{prop:"detailAddressText",label:"Address",width:"270"}}),t("el-table-column",{attrs:{label:"Action"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("Edit ")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("Delete ")])]}}])}),t("el-table-column",{attrs:{label:"Is Default Address",width:"110"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.defaultFlag?t("div",{staticStyle:{"padding-left":"10px",color:"#409eff"}},[e._v(e._s(a.row.defaultAddress))]):t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleSetDefault(a.$index,a.row)}}},[e._v("Set as Default\n                            ")])]}}])})],1)],1)],1),t("app-foot")],1)],1)},i=[],n=a("6e70"),r=a("4fc4"),d=a("85a9"),o={name:"me",components:{AppHead:n["a"],AppBody:r["a"],AppFoot:d["a"]},data:function(){return{imgFileList:[],addressInfo:{consigneeName:"",consigneePhone:"",provinceName:"",cityName:"",regionName:"",detailAddress:"",defaultFlag:!1},activeName:"1",handleName:["Unlist","Delete","Remove from Cart","",""],dataList:[[],[],[],[],[]],orderStatus:["Pending Payment","Pending Shipment","Pending Receipt","Completed","Canceled"],userInfoDialogVisible:!1,notUserNicknameEdit:!0,userPasswordEdit:!1,userPassword1:"",userPassword2:"",userPassword3:"",eidtAddress:!1,selectedOptions:[],options:options,userInfo:{email:"",avatar:"",nickname:"",signInTime:""},addressData:[]}},created:function(){var e=this;this.$globalData.userInfo.nickname?this.userInfo=this.$globalData.userInfo:this.$api.getUserInfo().then((function(t){1===t.status_code&&(t.data.signInTime=t.data.signInTime.substring(0,10),e.$globalData.userInfo=t.data,e.userInfo=e.$globalData.userInfo)})),this.getAddressData(),this.getIdleItemData(),this.getMyOrder(),this.getMySoldIdle(),this.getMyFavorite()},methods:{getMyFavorite:function(){var e=this;this.$api.getMyFavorite().then((function(t){if(1===t.status_code)for(var a=0;a<t.data.length;a++){var s=JSON.parse(t.data[a].idleItem.pictureList);e.dataList[2].push({favoriteId:t.data[a].id,id:t.data[a].idleItem.id,imgUrl:s.length>0?s[0]:"",idleName:t.data[a].idleItem.idleName,idleDetails:t.data[a].idleItem.idleDetails,timeStr:t.data[a].createTime.substring(0,10)+" "+t.data[a].createTime.substring(11,19),idlePrice:t.data[a].idleItem.idlePrice})}}))},getMySoldIdle:function(){var e=this;this.$api.getMySoldIdle().then((function(t){if(1===t.status_code)for(var a=0;a<t.data.length;a++){var s=JSON.parse(t.data[a].idleItem.pictureList);e.dataList[3].push({id:t.data[a].id,imgUrl:s.length>0?s[0]:"",idleName:t.data[a].idleItem.idleName,idleDetails:t.data[a].idleItem.idleDetails,timeStr:t.data[a].createTime.substring(0,10)+" "+t.data[a].createTime.substring(11,19),idlePrice:t.data[a].orderPrice,orderStatus:t.data[a].orderStatus})}}))},getMyOrder:function(){var e=this;this.$api.getMyOrder().then((function(t){if(1===t.status_code)for(var a=0;a<t.data.length;a++){var s=JSON.parse(t.data[a].idleItem.pictureList);e.dataList[4].push({id:t.data[a].id,imgUrl:s.length>0?s[0]:"",idleName:t.data[a].idleItem.idleName,idleDetails:t.data[a].idleItem.idleDetails,timeStr:t.data[a].createTime.substring(0,10)+" "+t.data[a].createTime.substring(11,19),idlePrice:t.data[a].orderPrice,orderStatus:t.data[a].orderStatus})}}))},getIdleItemData:function(){var e=this;this.$api.getAllIdleItem().then((function(t){if(1===t.status_code)for(var a=0;a<t.data.length;a++){t.data[a].timeStr=t.data[a].releaseTime.substring(0,10)+" "+t.data[a].releaseTime.substring(11,19);var s=JSON.parse(t.data[a].pictureList);t.data[a].imgUrl=s.length>0?s[0]:"",1===t.data[a].idleStatus?e.dataList[0].push(t.data[a]):2===t.data[a].idleStatus&&e.dataList[1].push(t.data[a])}}))},getAddressData:function(){var e=this;this.$api.getAddress().then((function(t){if(1===t.status_code){for(var a=t.data,s=0;s<a.length;s++)a[s].detailAddressText=a[s].provinceName+a[s].cityName+a[s].regionName+a[s].detailAddress,a[s].defaultAddress=a[s].defaultFlag?"Default Address":"Set as Default";e.addressData=a}}))},handleClick:function(e,t){console.log(this.activeName)},saveUserNickname:function(){var e=this;this.notUserNicknameEdit=!0,this.$api.updateUserPublicInfo({nickname:this.userInfo.nickname}).then((function(t){e.$globalData.userInfo.nickname=e.userInfo.nickname}))},savePassword:function(){var e=this;this.userPassword1&&this.userPassword2?this.userPassword2===this.userPassword3?this.$api.updatePassword({oldPassword:this.userPassword1,newPassword:this.userPassword2}).then((function(t){1===t.status_code?(e.userPasswordEdit=!1,e.$message({message:"Modification successful!",type:"success"}),e.userPassword1="",e.userPassword2="",e.userPassword3=""):e.$message.error("Old password incorrect, modification failed!")})):this.$message.error("Passwords do not match!"):this.$message.error("Password is empty!")},finishEdit:function(){this.notUserNicknameEdit=!0,this.userInfoDialogVisible=!1,this.userPasswordEdit=!1},handleAddressChange:function(e){this.addressInfo.provinceName=e[0],this.addressInfo.cityName=e[1],this.addressInfo.regionName=e[2]},handleEdit:function(e,t){this.addressInfo=JSON.parse(JSON.stringify(t)),this.selectedOptions=["","",""],this.selectedOptions[0]=t.provinceName,this.selectedOptions[1]=t.cityName,this.selectedOptions[2]=t.regionName},handleDelete:function(e,t){var a=this;this.$confirm("Are you sure to delete this address?","Prompt",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.$api.deleteAddress(t).then((function(s){1===s.status_code?(a.$message({message:"Deleted successfully!",type:"success"}),a.addressData.splice(e,1),t.defaultFlag&&a.addressData.length>0&&(a.addressData[0].defaultFlag=!0,a.addressData[0].defaultAddress="Default Address",a.update({id:a.addressData[0].id,defaultFlag:!0}))):a.$message.error("System error, failed to delete!")})).catch((function(){a.$message.error("Network error!")}))})).catch((function(){}))},handleSetDefault:function(e,t){t.defaultFlag=!0,this.update(t)},toDetails:function(e,t){"4"===e||"5"===e?this.$router.push({path:"/order",query:{id:t.id}}):this.$router.push({path:"/details",query:{id:t.id}})},handle:function(e,t,a){var s=this;this.$confirm("Are you sure?","Prompt",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){"1"===e?s.$api.updateIdleItem({id:t.id,idleStatus:2}).then((function(e){1===e.status_code?(s.dataList[0].splice(a,1),t.idleStatus=2,s.dataList[1].unshift(t)):s.$message.error(e.msg)})):"2"===e?s.$api.updateIdleItem({id:t.id,idleStatus:0}).then((function(e){1===e.status_code?s.dataList[1].splice(a,1):s.$message.error(e.msg)})):"3"===e&&s.$api.deleteFavorite({id:t.favoriteId}).then((function(e){1===e.status_code?(s.$message({message:"Removed from cart!",type:"success"}),s.dataList[2].splice(a,1)):s.$message.error(e.msg)}))})).catch((function(){}))},fileHandleSuccess:function(e,t,a){var s=this,i=e.data;this.imgFileList=[],this.$api.updateUserPublicInfo({avatar:i}).then((function(e){s.userInfo.avatar=i,s.$globalData.userInfo.avatar=i}))},update:function(e){var t=this;this.$api.updateAddress(e).then((function(e){1===e.status_code?(t.getAddressData(),t.$message({message:"Modification successful!",type:"success"})):t.$message.error("System error, modification failed!")})).catch((function(){t.$message.error("Network error!")}))},saveAddress:function(){var e=this;this.addressInfo.id?(this.update(this.addressInfo),this.addressInfo={consigneeName:"",consigneePhone:"",provinceName:"",cityName:"",regionName:"",detailAddress:"",defaultFlag:!1},this.selectedOptions=[]):this.addressData.length>=5?this.$message.error("Reached maximum address limit!"):this.$api.addAddress(this.addressInfo).then((function(t){1===t.status_code?(e.getAddressData(),e.$message({message:"Added successfully!",type:"success"}),e.selectedOptions=[],e.addressInfo={consigneeName:"",consigneePhone:"",provinceName:"",cityName:"",regionName:"",detailAddress:"",defaultFlag:!1}):e.$message.error("System error, failed to add!")})).catch((function(){e.$message.error("Network error!")}))}}},l=o,c=(a("3d34"),a("2877")),u=Object(c["a"])(l,s,i,!1,null,"6bf51698",null);t["default"]=u.exports},"6e70":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("div",{staticClass:"header-container"},[t("div",{staticClass:"app-name"},[t("router-link",{attrs:{to:"/"}},[e._v("Campus Exchange")])],1),t("div",{staticClass:"search-container"},[t("el-input",{attrs:{placeholder:"Search item..."},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchIdle.apply(null,arguments)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchIdle},slot:"append"})],1)],1),t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.toRelease}},[e._v("Create new listing")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-chat-dot-round"},on:{click:e.toMessage}},[e._v("Message")]),e.isLogin?t("el-dropdown",{attrs:{trigger:"click"}},[t("div",{staticStyle:{cursor:"pointer",display:"flex","align-items":"center"}},[t("div",{staticStyle:{"font-size":"16px",color:"#409EFF","padding-right":"5px"}},[e._v(e._s(e.nicknameValue?e.nicknameValue:e.nickname))]),t("el-avatar",{attrs:{src:e.avatarValue?e.avatarValue:e.avatar}})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("div",{on:{click:e.toMe}},[e._v("Profile")])]),t("el-dropdown-item",{staticStyle:{color:"red"},attrs:{divided:""}},[t("div",{on:{click:e.loginOut}},[e._v("Logout")])])],1)],1):t("router-link",{staticClass:"user-name-text",attrs:{to:"/login"}},[e._v("Login")])],1)])},i=[],n=(a("a481"),{name:"Header",props:["searchInput","nicknameValue","avatarValue"],data:function(){return{searchValue:this.searchInput,nickname:"Login",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",isLogin:!1}},created:function(){var e=this;this.$globalData.userInfo.nickname?(this.nickname=this.$globalData.userInfo.nickname,this.avatar=this.$globalData.userInfo.avatar,this.isLogin=!0):this.$api.getUserInfo().then((function(t){console.log("Header getUserInfo:",t),1===t.status_code&&(e.nickname=t.data.nickname,e.avatar=t.data.avatar,t.data.signInTime=t.data.signInTime.substring(0,10),e.$globalData.userInfo=t.data,e.isLogin=!0)}))},methods:{searchIdle:function(){"/search"!==this.$route.path?this.$router.push({path:"/search",query:{searchValue:this.searchValue}}):(this.$router.replace({path:"/search",query:{searchValue:this.searchValue}}),this.$router.go(0))},toMe:function(){"/me"!==this.$route.path&&this.$router.push({path:"/me"})},toMessage:function(){"/message"!==this.$route.path&&this.$router.push({path:"/message"})},toRelease:function(){"/release"!==this.$route.path&&this.$router.push({path:"/release"})},loginOut:function(){var e=this;this.$api.logout().then((function(t){1===t.status_code?(e.$globalData.userInfo={},console.log("login out"),"/index"===e.$route.path?e.$router.go(0):e.$router.push({path:"/index"})):e.$message.error("Network or system error, fail to logout.")}))}}}),r=n,d=(a("3feb"),a("2877")),o=Object(d["a"])(r,s,i,!1,null,"3e476e82",null);t["a"]=o.exports},"823f":function(e,t,a){"use strict";a("02e0")},"85a9":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"foot-container"},[t("div",{staticClass:"author"},[e._v("Campus Exchange Copyright © "+e._s(e.currentYear)+" @BU CS673")])])},i=[],n={name:"Foot"},r=n,d=(a("823f"),a("2877")),o=Object(d["a"])(r,s,i,!1,null,"71fbc79b",null);t["a"]=o.exports},"9b16":function(e,t,a){},ac38:function(e,t,a){},c95a:function(e,t,a){"use strict";a("ff1e")},ff1e:function(e,t,a){}}]);