{% extends 'analysis/base.html' %}
{% block title %}Word Cloud | MDVP{% endblock %}

{% block content %}
<h1>Word Cloud</h1>
<div id="wordCloud" style="width: 100%; height: 600px;"></div>

<script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud/dist/echarts-wordcloud.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const chart = echarts.init(document.getElementById('wordCloud'));

    fetch('/analysis/wordCloud/data/')
        .then(response => response.json())
        .then(data => {
            chart.setOption({
                title: { text: 'IMDB Reviews Word Cloud' },
                tooltip: {},
                series: [{
                    type: 'wordCloud',
                    shape: 'circle',
                    sizeRange: [12, 60],
                    rotationRange: [-90, 90],
                    textStyle: { color: () => `rgb(${Math.random()*255}, ${Math.random()*255}, ${Math.random()*255})` },
                    data: data
                }]
            });
        });
});
</script>
{% endblock %}